<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Parking Reserved Sign</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                background: #f0f0f0;
                font-family: 'Highway Gothic', 'Arial Narrow', Arial, sans-serif;
            }

            .sign-container {
                width: 600px;
                height: 900px;
                position: relative;
            }

            svg {
                width: 100%;
                height: 100%;
            }

            .sign-background {
                fill: #003f7f;
                stroke: #ffffff;
                stroke-width: 8;
            }

            .sign-text {
                fill: #ffffff;
                font-weight: bold;
                text-anchor: middle;
            }

            .header-text {
                font-size: 120px;
                letter-spacing: -5px;
            }

            .message-text {
                font-size: 80px;
            }

            .dynamic-message {
                /* This will be populated dynamically */
            }
        </style>
    </head>
    <body>
        <div class="sign-container">
            <svg viewBox="0 0 600 900" xmlns="http://www.w3.org/2000/svg">
                <!-- Sign background -->
                <rect class="sign-background" x="10" y="10" width="580" height="880" rx="20" />

                <!-- P symbol -->
                <g transform="translate(300, 200)">
                    <circle cx="0" cy="0" r="120" fill="none" stroke="#ffffff" stroke-width="15" />
                    <text x="0" y="40" class="sign-text" style="font-size: 180px">P</text>
                </g>

                <!-- RESERVED text -->
                <text x="300" y="450" class="sign-text header-text">RESERVED</text>

                <!-- Message area - this will be replaced with dynamic content -->
                <foreignObject x="50" y="500" width="500" height="350">
                    <div
                        xmlns="http://www.w3.org/1999/xhtml"
                        style="
                            width: 100%;
                            height: 100%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        "
                    >
                        <div
                            id="message-area"
                            style="
                                color: white;
                                text-align: center;
                                font-size: 60px;
                                font-weight: bold;
                                line-height: 1.2;
                                word-wrap: break-word;
                                padding: 20px;
                            "
                        >
                            <!-- Dynamic message will go here -->
                        </div>
                    </div>
                </foreignObject>
            </svg>
        </div>

        <script>
            // Function to set the message
            function setMessage(message) {
                const messageArea = document.getElementById('message-area');
                if (messageArea && message) {
                    messageArea.textContent = message;

                    // Auto-resize text if too long
                    const maxLength = 30;
                    if (message.length > maxLength) {
                        const baseFontSize = 60;
                        const scaleFactor = Math.max(0.5, maxLength / message.length);
                        messageArea.style.fontSize = baseFontSize * scaleFactor + 'px';
                    }
                }
            }

            // Function to convert text to SVG paths (for production export)
            function convertTextToPaths() {
                // This will be implemented when we add the export functionality
                // It will use a library like opentype.js to convert text to paths
            }

            // Check if message is passed via URL parameter (for testing)
            const urlParams = new URLSearchParams(window.location.search);
            const message = urlParams.get('message');
            if (message) {
                setMessage(message);
            }

            // Expose functions for Mapping Slayer to use
            window.signTemplate = {
                setMessage: setMessage,
                convertTextToPaths: convertTextToPaths,
                getSignSVG: function () {
                    return document.querySelector('svg').outerHTML;
                }
            };
        </script>
    </body>
</html>
